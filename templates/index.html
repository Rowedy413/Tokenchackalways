<!DOCTYPE html>
<html>
<head>
    <title>FB Token Checker</title>
    <link rel="stylesheet" href="/static/style.css">
    <script src="/static/rain.js"></script>
</head>
<body style="background-image: url('{{ bg_url }}'); background-size: cover;">
<header>
    <h1>OWNER ROWEDY KIING</h1>
</header>

<div class="container">
    <form method="POST" enctype="multipart/form-data">
        <h2>Single Token Check</h2>
        <input type="text" name="token" placeholder="Enter Facebook Token" required>
        <button type="submit">Check Token</button>

        <h2>Upload Token File (.txt)</h2>
        <input type="file" name="token_file" accept=".txt">
        <button type="submit">Check File</button>
    </form>

    {% if result %}
        {% if result.valid %}
            <div class="card">
                <img src="{{ result.dp }}" alt="DP">
                <p>{{ result.name }}</p>
                <p><button onclick="copyToken('{{ result.token }}')">Copy Token</button></p>
            </div>
        {% else %}
            <p style="color:red;">Invalid Token</p>
        {% endif %}
    {% endif %}

    {% if valid_tokens %}
        <h3>Valid Tokens</h3>
        <form method="POST" action="/download_valid_tokens">
            <ul>
                {% for v in valid_tokens %}
                    <li>
                        <img src="{{ v.dp }}" width="30"> {{ v.name }}
                        <button type="button" onclick="copyToken('{{ v.token }}')">Copy</button>
                        <input type="hidden" name="tokens[]" value="{{ v.token }}">
                    </li>
                {% endfor %}
            </ul>
            <button type="button" onclick="copyAll()">Copy All</button>
            <button type="submit">Save All to TXT</button>
        </form>
    {% endif %}

    {% if invalid_tokens %}
        <h3 style="color:red;">Invalid Tokens</h3>
        <ul>
            {% for inv in invalid_tokens %}
                <li>{{ inv }}</li>
            {% endfor %}
        </ul>
    {% endif %}
</div>

<footer>
    DEVELOPED BY ROWEDY STYLIYSH
</footer>

<script>
function copyToken(token) {
    navigator.clipboard.writeText(token);
    alert("Token copied!");
}
function copyAll() {
    let tokens = document.querySelectorAll("input[name='tokens[]']");
    let all = [];
    tokens.forEach(t => all.push(t.value));
    navigator.clipboard.writeText(all.join("\n"));
    alert("All tokens copied!");
}
</script>
</body>
</html>
